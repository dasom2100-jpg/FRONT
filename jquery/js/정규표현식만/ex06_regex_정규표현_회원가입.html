<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        #joinForm {
            background: white;
            width: 500px;
            max-width: 100%;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        #joinForm > h1 {
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            letter-spacing: 2px;
            color: #28ad28;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        .form-group label .required {
            color: #e74c3c;
            margin-left: 3px;
        }

        #joinForm input,
        #joinForm select {
            width: 100%;
            height: 50px;
            padding: 0 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            outline: none;
            transition: all 0.3s ease;
        }

        #joinForm input:focus,
        #joinForm select:focus {
            border-color: #28ad28;
            box-shadow: 0 0 0 3px rgba(40, 173, 40, 0.1);
        }

        #joinForm input.error,
        #joinForm select.error {
            border-color: #e74c3c;
            background-color: #fff5f5;
        }

        #joinForm input.success {
            border-color: #27ae60;
            background-color: #f0fff4;
        }

        #joinForm input::placeholder {
            color: #aaa;
        }

        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 5px;
            padding-left: 5px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        #joinForm select {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 40px;
        }

        #joinForm select option:disabled {
            color: #aaa;
        }

        #joinBtn {
            width: 100%;
            height: 55px;
            background: linear-gradient(135deg, #28ad28 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        #joinBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 173, 40, 0.3);
        }

        #joinBtn:active {
            transform: translateY(0);
        }

        .info-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            padding-left: 5px;
        }

        @media (max-width: 600px) {
            #joinForm {
                padding: 30px 20px;
            }

            #joinForm > h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div id="joinForm">
        <h1>회원가입</h1>

        <!-- 아이디 -->
        <div class="form-group">
            <label for="uid">
                아이디<span class="required">*</span>
            </label>
            <input type="text" name="uid" id="uid" class="validIn" 
                   placeholder="영문, 숫자, 언더스코어(_) 6~20자">
            <div class="error-message" id="uidError"></div>
            <div class="info-text">영문자, 숫자, 언더스코어(_) 조합 6~20자</div>
        </div>

        <!-- 비밀번호 -->
        <div class="form-group">
            <label for="upw">
                비밀번호<span class="required">*</span>
            </label>
            <input type="password" name="upw" id="upw" class="validIn" 
                   placeholder="영문 대문자, 숫자, 특수문자 포함 6~20자">
            <div class="error-message" id="upwError"></div>
            <div class="info-text">영문 대문자, 숫자, 특수문자 필수 포함 6~20자</div>
        </div>

        <!-- 이름 -->
        <div class="form-group">
            <label for="unm">
                이름<span class="required">*</span>
            </label>
            <input type="text" name="unm" id="unm" class="validIn" 
                   placeholder="한글 또는 영문 2~20자">
            <div class="error-message" id="unmError"></div>
            <div class="info-text">한글, 영문, 공백만 사용 가능 2~20자</div>
        </div>

        <!-- 이메일 -->
        <div class="form-group">
            <label for="umail">
                이메일<span class="required">*</span>
            </label>
            <input type="email" name="umail" id="umail" class="validIn" 
                   placeholder="example@domain.com">
            <div class="error-message" id="umailError"></div>
            <div class="info-text">이메일 형식: example@domain.com</div>
        </div>

        <!-- 생년월일 -->
        <div class="form-group">
            <label for="ubirth">
                생년월일<span class="required">*</span>
            </label>
            <input type="text" name="ubirth" id="ubirth" class="validIn" 
                   placeholder="YYYYMMDD (예: 19901231)">
            <div class="error-message" id="ubirthError"></div>
            <div class="info-text">8자리 숫자 (예: 19901231)</div>
        </div>

        <!-- 통신사 -->
        <div class="form-group">
            <label for="uagency">
                통신사<span class="required">*</span>
            </label>
            <select name="uagency" id="uagency" class="validIn">
                <option value="" selected disabled>통신사를 선택하세요</option>
                <optgroup label="주요 통신사">
                    <option value="SKT">SKT</option>
                    <option value="KT">KT</option>
                    <option value="LG U+">LG U+</option>
                </optgroup>
                <optgroup label="알뜰폰">
                    <option value="SKT 알뜰폰">SKT 알뜰폰</option>
                    <option value="KT 알뜰폰">KT 알뜰폰</option>
                    <option value="LG U+ 알뜰폰">LG U+ 알뜰폰</option>
                </optgroup>
            </select>
            <div class="error-message" id="uagencyError"></div>
        </div>

        <!-- 전화번호 -->
        <div class="form-group">
            <label for="utel">
                전화번호<span class="required">*</span>
            </label>
            <input type="tel" name="utel" id="utel" class="validIn" 
                   placeholder="010-1234-5678">
            <div class="error-message" id="utelError"></div>
            <div class="info-text">010-1234-5678 형식</div>
        </div>

        <!-- 가입 버튼 -->
        <input type="button" id="joinBtn" value="회원가입">
    </div>

    <script>
        $(document).ready(function() {
            // ============================================
            // 정규식 패턴 정의
            // ============================================
            const regexPatterns = {
                // 아이디: 영문, 숫자, 언더스코어(_) 6~20자
                uid: /^[a-zA-Z0-9_]{6,20}$/,
                
                // 비밀번호: 영문, 숫자, 특수문자 6~20자 (대문자, 특수문자 필수)
                upw: /^[a-zA-Z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]{6,20}$/,
                
                // 이름: 한글, 영문, 공백 2~20자
                unm: /^[a-zA-Z가-힣\s]{2,20}$/,
                
                // 이메일: 표준 이메일 형식
                umail: /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,
                
                // 생년월일: YYYYMMDD 형식 (1900~2999년, 01~12월, 01~31일)
                ubirth: /^(19|20|21|22|23|24|25|26|27|28|29)\d{2}(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])$/,
                
                // 전화번호: 010-1234-5678 형식
                utel: /^010-\d{4}-\d{4}$/
            };

            // ============================================
            // 에러 메시지 정의
            // ============================================
            const errorMessages = {
                uid: '아이디는 영문자, 숫자, 언더스코어(_) 조합 6~20자로 입력해주세요.',
                upw: '비밀번호는 영문자, 숫자, 특수문자 조합 6~20자로 입력해주세요.',
                unm: '이름은 한글, 영문, 공백만 사용하여 2~20자로 입력해주세요.',
                umail: '올바른 이메일 형식을 입력해주세요. (예: example@domain.com)',
                ubirth: '생년월일은 8자리 숫자로 입력해주세요. (예: 19901231)',
                uagency: '통신사를 선택해주세요.',
                utel: '전화번호는 010-1234-5678 형식으로 입력해주세요.'
            };

            // ============================================
            // 유효성 검사 상태
            // ============================================
            const validationState = {
                uid: false,
                upw: false,
                unm: false,
                umail: false,
                ubirth: false,
                uagency: false,
                utel: false
            };

            // ============================================
            // 유효성 검사 함수
            // ============================================
            function validateField(fieldId, value) {
                const $field = $('#' + fieldId);
                const $error = $('#' + fieldId + 'Error');
                
                // 빈 값 체크
                if (!value || value.trim() === '') {
                    $field.removeClass('success').addClass('error');
                    $error.text('필수 입력 항목입니다.').addClass('show');
                    validationState[fieldId] = false;
                    return false;
                }

                // 정규식 검사
                const regex = regexPatterns[fieldId];
                
                if (!regex.test(value)) {
                    $field.removeClass('success').addClass('error');
                    $error.text(errorMessages[fieldId]).addClass('show');
                    validationState[fieldId] = false;
                    
                    // 비밀번호 추가 검사
                    if (fieldId === 'upw') {
                        if (!hasUpperCase(value)) {
                            $error.text('영문 대문자를 반드시 포함해주세요.');
                        } else if (!hasSpecialChar(value)) {
                            $error.text('특수문자를 반드시 포함해주세요.');
                        }
                    }
                    
                    return false;
                } else {
                    // 비밀번호 추가 검사 (대문자, 특수문자 포함 여부)
                    if (fieldId === 'upw') {
                        if (!hasUpperCase(value)) {
                            $field.removeClass('success').addClass('error');
                            $error.text('영문 대문자를 반드시 포함해주세요.').addClass('show');
                            validationState[fieldId] = false;
                            return false;
                        }
                        if (!hasSpecialChar(value)) {
                            $field.removeClass('success').addClass('error');
                            $error.text('특수문자를 반드시 포함해주세요.').addClass('show');
                            validationState[fieldId] = false;
                            return false;
                        }
                    }
                    
                    // 유효성 검사 성공
                    $field.removeClass('error').addClass('success');
                    $error.removeClass('show');
                    validationState[fieldId] = true;
                    return true;
                }
            }

            // ============================================
            // 비밀번호 검증 보조 함수
            // ============================================
            
            // 대문자 포함 여부
            function hasUpperCase(str) {
                return /[A-Z]/.test(str);
            }

            // 특수문자 포함 여부
            function hasSpecialChar(str) {
                return /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(str);
            }

            // ============================================
            // 전화번호 자동 하이픈 추가
            // ============================================
            $('#utel').on('input', function() {
                let value = $(this).val().replace(/[^\d]/g, ''); // 숫자만 추출
                
                if (value.length > 3 && value.length <= 7) {
                    value = value.replace(/(\d{3})(\d+)/, '$1-$2');
                } else if (value.length > 7) {
                    value = value.replace(/(\d{3})(\d{4})(\d+)/, '$1-$2-$3');
                }
                
                $(this).val(value);
            });

            // ============================================
            // 생년월일 자동 포맷팅 (선택사항)
            // ============================================
            $('#ubirth').on('input', function() {
                let value = $(this).val().replace(/[^\d]/g, ''); // 숫자만 추출
                
                if (value.length > 8) {
                    value = value.substring(0, 8);
                }
                
                $(this).val(value);
            });

            // ============================================
            // 실시간 유효성 검사 (blur 이벤트)
            // ============================================
            $('.validIn').on('blur', function() {
                const fieldId = $(this).attr('id');
                const value = $(this).val();
                validateField(fieldId, value);
            });

            // ============================================
            // 회원가입 버튼 클릭
            // ============================================
            $('#joinBtn').on('click', function(e) {
                e.preventDefault();
                
                // 모든 필드 유효성 검사
                let allValid = true;
                
                $('.validIn').each(function() {
                    const fieldId = $(this).attr('id');
                    const value = $(this).val();
                    
                    if (!validateField(fieldId, value)) {
                        allValid = false;
                    }
                });

                // 최종 검증
                if (allValid && Object.values(validationState).every(val => val === true)) {
                    // 회원가입 데이터 수집
                    const formData = {
                        uid: $('#uid').val(),
                        upw: $('#upw').val(),
                        unm: $('#unm').val(),
                        umail: $('#umail').val(),
                        ubirth: $('#ubirth').val(),
                        uagency: $('#uagency').val(),
                        utel: $('#utel').val()
                    };

                    console.log('회원가입 데이터:', formData);
                    
                    alert('회원가입이 완료되었습니다!\n\n아이디: ' + formData.uid + '\n이름: ' + formData.unm);
                    
                    // 폼 초기화 (선택사항)
                    // $('#joinForm')[0].reset();
                    // $('.validIn').removeClass('success error');
                    // $('.error-message').removeClass('show');
                } else {
                    alert('입력 정보를 다시 확인해주세요.');
                    
                    // 첫 번째 에러 필드로 포커스
                    for (let key in validationState) {
                        if (!validationState[key]) {
                            $('#' + key).focus();
                            break;
                        }
                    }
                }
            });

            // ============================================
            // 엔터키로 다음 필드 이동
            // ============================================
            $('.validIn').on('keypress', function(e) {
                if (e.which === 13) { // Enter key
                    e.preventDefault();
                    const $inputs = $('.validIn');
                    const currentIndex = $inputs.index(this);
                    
                    if (currentIndex < $inputs.length - 1) {
                        $inputs.eq(currentIndex + 1).focus();
                    } else {
                        $('#joinBtn').click();
                    }
                }
            });
        });
    </script>
</body>
</html>