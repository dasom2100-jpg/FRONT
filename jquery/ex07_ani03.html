<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>애니메이트</title>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<style>
		* { box-sizing: border-box; }
		body { margin: 0; }

		/* 공통 */
		#topFixBox,
		#accordionBox,
		#sideBox {
			width: 100%;
			margin: 60px 0 20px;
			padding: 10px;
		}

		/* 1. topfix */
		#topFixBox {
			width: 100%;
			height: 500px;
			margin: 60px 0 20px;
			padding: 10px;
			background-color: aquamarine;
		}

		#header {
			position: fixed;
			display: flex;
			top: 0;
			left: 0;
			width: 100%;
			height: 60px;
			justify-content: center;
			align-items: center;
			border-bottom: 1px solid #777;
			background-color: #fff;
			font-weight: bold;
		}

		.items {
			width: 100px;
			color: #555;
		}

		/* 2. accordion */
		.content {
			display: none;
			padding: 10px 20px 30px;
			border: 1px solid #ccc;
			background-color: #fff;
		}

		.title {
			height: 50px;
			line-height: 50px;
			background-color: aqua;
			margin: 0px;
			padding-left: 10px;
			border-bottom: 1px solid #ccc;
		}

		/* 3. side */
		#sideBox {
			text-align: right;
			border-top : 1px solid #ccc;
		}
		
		#sideMenu {
			position: fixed;
			top: 0;
			left: -250px;
			width: 250px;
			height: 100%;
			background-color: red;
			color: #fff;
		}
	</style>
	<script>
		/*
		참고사이트 : https://jquery.com/  => [API Documentation] 메뉴 클릭
		=> 해당 함수들, 이벤트들에 대한 Doc문서 제공(사용방법, 옵션, 예제 등등 설명)
		*/
		$(function () {
			//1. topfix
			let lastScroll = 0;

			$(window).on("scroll", function () {
				const currentScroll = $(this).scrollTop();
				if (currentScroll > lastScroll && currentScroll > 100) {
					// 아래로 스크롤 : 숨김
					$("#header").stop().animate({ top: "-61px" }, 400);
				} else {
					// 위로 스크롤 : 표시
					$("#header").stop().animate({ top: "0px" }, 200);
				}
				lastScroll = currentScroll;
			});


			// 2. accordion
			// $().on(function(){});
			$(".title").on("click", function () {
				const $content = $(this).next(".content");

				// :visible 탐색선택자 => visibility : hidden은 "visible"로 인식함.
				if ($content.is(":visible")) {
					$content.stop(true).animate({ height: "0px" }, 600, 'linear', function () {
						$(this).hide();
					});
				} else {
					$content.show();

					// "height", "auto" => 	height:auto로 복원 후 실제 높이 측정
					$content.css("height", "auto");
					/*
					prop("scrollHeight") : content + padding 사이즈를 가져옴. (border미포함)
					: 숨어있거나 안보이는 요소 모두 포함하여 그 안에 들어 있는 모든 콘텐츠의 진짜 높이를 가져오는 속성
					*/
					// const height = $content.prop("scrollHeight");

					//outerHeight() : content + padding + border
					const height = $content.outerHeight();
					$content.css("height", 0).stop().animate({ height: height + "px" }, 600, 'linear');
				}
			});

			// 3. side
			let isOpen = false;

			$("#menuBtn").on("click", function () {
				$("#sideMenu").stop().animate(
					{ left: isOpen ? "-250px" : "0px" },
					300
				);
				isOpen = !isOpen;
			});
		});
	</script>
</head>

<body>
	<!-- topfix -->
	<div id="topFixBox">
		<h1>상단 고정 헤더 숨김 / 나타남 (스크롤 반응)</h1>
		<p>쇼핑몰, 블로그, 관리자 페이지등에 흔하게 사용</p>
		<p>쇼핑몰, 블로그, 관리자 페이지등에 흔하게 사용</p>
		<p>쇼핑몰, 블로그, 관리자 페이지등에 흔하게 사용</p>
		<header id="header">
			<span class="items">메뉴1</span>
			<span class="items">메뉴2</span>
			<span class="items">메뉴3</span>
			<span class="items">메뉴4</span>
			<span class="items">메뉴5</span>
		</header>
	</div>

	<!-- accordion -->
	<div id="accordionBox">
		<h1>아코디언 메뉴 (높이 자동 계산)</h1>
		<p>관리자 메뉴, FAQ, 사이드바 등에 사용</p>
		<div class="accordion">
			<h3 class="title">1. prop() 함수의 scrollHeight속성이란?</h3>
			<div class="content">숨어있거나 안보이는 요소 모두 포함하여 그 안에 들어 있는 모든 콘텐츠의 진짜 높이를 가져오는 속성</div>

			<h3 class="title">2. 제이쿼리의 :visible 탐색선택자</h3>
			<div class="content">
				visibility : hidden은 "visible"로 인식함.<br>
				display : none속성에 대해서만 보여지지 않는 요소로 인식<br>
			</div>
		</div>
	</div>
	<br><br><br><br><br><br><br><br><br><br>
	<br><br><br><br><br><br><br><br><br><br>
	<br><br><br><br><br><br><br><br><br><br>
	<br><br><br><br><br><br><br><br><br><br>
	<br><br><br><br><br><br><br><br><br><br>

	<!-- 3. side -->
	<div id="sideBox">
		<h1>사이드 메뉴 슬라이드 인 / 아웃</h1>
		<p>모바일 메뉴, 관리자 패널 등에 사용</p>
		<button id="menuBtn">메뉴</button>

		<nav id="sideMenu">
			사이드 메뉴
		</nav>
	</div>
</body>

</html>